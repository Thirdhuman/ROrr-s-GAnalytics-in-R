license_2	=	merge(out_2_2017, out_2_2018)
#license_2_f	=	merge(license_2, state)
license_2_f <- within(license_2, perc_change_lice <- lice_18-lice_17)
# 2
names(out_3_2017)
colnames(out_3_2017)[colnames(out_3_2017)=="license30"]="not_req_lice_17"
colnames(out_3_2017)[colnames(out_3_2017)=="license31"]="lice_req_17"
out_3_2017$se1=NULL
out_3_2017$se2=NULL
names(out_3_2018)
colnames(out_3_2018)[colnames(out_3_2018)=="license30"]="not_req_lice_18"
colnames(out_3_2018)[colnames(out_3_2018)=="license31"]="lice_req_18"
out_3_2018$se1=NULL
out_3_2018$se2=NULL
license_3	=	merge(out_3_2017, out_3_2018)
license_3_f <- within(license_3, perc_change_req_lice <- lice_req_18-lice_req_17)
license_f=merge(license_1_f ,license_2_f, by="gestfips")
license_final=merge(license_f ,license_3_f, by="gestfips")
license_final	=	merge(license_final, state, by="gestfips")
write.csv(license_final, 'license_final.csv')
write.csv(license_final, '/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/license_final.csv')
license_final <- within(license_3, perc_change_cert_a <- perc_change_cert*100)
license_final <- within(license_3, perc_change_lice_a <- perc_change_lice*100)
license_final <- within(license_3, perc_change_req_lice_a <- perc_change_req_lice*100)
write.csv(license_final, '/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/license_final.csv')
license_final <- within(license_final, perc_change_cert_a <- perc_change_cert*100)
license_final <- within(license_final, perc_change_lice_a <- perc_change_lice*100)
license_final <- within(license_final, perc_change_req_lice_a <- perc_change_req_lice*100)
write.csv(license_final, '/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/license_final.csv')
out_1_2017_a=svyby(~pecert1, by= ~gestfips, design = z2017_prime,  svymean)
out_1_2018_a=svyby(~pecert1, by= ~gestfips, design = z2018_prime,  svymean)
svymean(~pecert1, z2017_prime)
svymean(~pecert1, z2018_prime)
svymean(~license1, z2017_prime)
svymean(~license1, z2018_prime)
svymean(~license2, z2017_cert)
svymean(~license2, z2018_cert)
svymean(~license3, z2017_license)
svymean(~license3, z2018_license)
pop_1_2017_a=svyby(~pecert1, by= ~gestfips, design = z2017_prime,  svytotal)
pop_1_2018_a=svyby(~pecert1, by= ~gestfips, design = z2018_prime,  svytotal)
out_1_2017_a=svyby(~pecert1, by= ~gestfips, design = z2017_prime,  svytotal)
out_1_2018_a=svyby(~pecert1, by= ~gestfips, design = z2018_prime,  svytotal)
out_2_2017_a=svyby(~pecert2, by= ~gestfips, design = z2017_cert,  svytotal)
out_2_2018_a=svyby(~pecert2, by= ~gestfips, design = z2018_cert,  svytotal)
out_3_2017_a=svyby(~pecert3, by= ~gestfips, design = z2017_license,  svytotal)
out_3_2018_a=svyby(~pecert3, by= ~gestfips, design = z2018_license,  svytotal)
out_1_2017=svyby(~license1, by= ~gestfips, design = z2017_prime,  svytotal)
out_1_2018=svyby(~license1, by= ~gestfips, design = z2018_prime,  svytotal)
out_2_2017=svyby(~license2, by= ~gestfips, design = z2017_cert,  svytotal)
out_2_2018=svyby(~license2, by= ~gestfips, design = z2018_cert,  svytotal)
out_3_2017=svyby(~license3, by= ~gestfips, design = z2017_license,  svytotal)
out_3_2018=svyby(~license3, by= ~gestfips, design = z2018_license,  svytotal)
View(out_1_2017)
names(out_1_2017)
colnames(out_1_2017)[colnames(out_1_2017)=="license10"]="not_cert_17"
colnames(out_1_2017)[colnames(out_1_2017)=="license11"]="cert_17"
out_1_2017$se1=NULL
out_1_2017$se2=NULL
names(out_1_2018)
colnames(out_1_2018)[colnames(out_1_2018)=="license10"]="not_cert_18"
colnames(out_1_2018)[colnames(out_1_2018)=="license11"]="cert_18"
out_1_2018$se1=NULL
out_1_2018$se2=NULL
license_1	=	merge(out_1_2017, out_1_2018)
#license_1_f	=	merge(license_1, state)
license_1_f <- within(license_1, perc_change_cert <- cert_18-cert_17)
# 2
names(out_2_2017)
colnames(out_2_2017)[colnames(out_2_2017)=="license20"]="not_lice_17"
colnames(out_2_2017)[colnames(out_2_2017)=="license21"]="lice_17"
out_2_2017$se1=NULL
out_2_2017$se2=NULL
names(out_2_2018)
colnames(out_2_2018)[colnames(out_2_2018)=="license20"]="not_lice_18"
colnames(out_2_2018)[colnames(out_2_2018)=="license21"]="lice_18"
out_2_2018$se1=NULL
out_2_2018$se2=NULL
license_2	=	merge(out_2_2017, out_2_2018)
#license_2_f	=	merge(license_2, state)
license_2_f <- within(license_2, perc_change_lice <- lice_18-lice_17)
# 2
names(out_3_2017)
colnames(out_3_2017)[colnames(out_3_2017)=="license30"]="not_req_lice_17"
colnames(out_3_2017)[colnames(out_3_2017)=="license31"]="lice_req_17"
out_3_2017$se1=NULL
out_3_2017$se2=NULL
names(out_3_2018)
colnames(out_3_2018)[colnames(out_3_2018)=="license30"]="not_req_lice_18"
colnames(out_3_2018)[colnames(out_3_2018)=="license31"]="lice_req_18"
out_3_2018$se1=NULL
out_3_2018$se2=NULL
license_3	=	merge(out_3_2017, out_3_2018)
license_3_f <- within(license_3, perc_change_req_lice <- lice_req_18-lice_req_17)
license_f=merge(license_1_f ,license_2_f, by="gestfips")
license_final=merge(license_f ,license_3_f, by="gestfips")
license_final	=	merge(license_final, state, by="gestfips")
View(license_final)
pop_1_2017=svyby(~pecert1, by= ~gestfips, design = z2017_prime,  svytotal)
pop_1_2018=svyby(~pecert1, by= ~gestfips, design = z2018_prime,  svytotal)
View(pop_1_2018)
pop_1_2017=svyby(~one, by= ~gestfips, design = z2017_prime,  svytotal)
pop_1_2018=svyby(~one, by= ~gestfips, design = z2018_prime,  svytotal)
View(pop_1_2018)
pop_1_2017=svyby(~one, by= ~gestfips, design = z2017_prime,  svytotal)
pop_1_2018=svyby(~one, by= ~gestfips, design = z2018_prime,  svytotal)
out_1_2017_a=svyby(~pecert1, by= ~gestfips, design = z2017_prime,  svytotal)
out_1_2018_a=svyby(~pecert1, by= ~gestfips, design = z2018_prime,  svytotal)
out_2_2017_a=svyby(~pecert2, by= ~gestfips, design = z2017_cert,  svytotal)
out_2_2018_a=svyby(~pecert2, by= ~gestfips, design = z2018_cert,  svytotal)
out_3_2017_a=svyby(~pecert3, by= ~gestfips, design = z2017_license,  svytotal)
out_3_2018_a=svyby(~pecert3, by= ~gestfips, design = z2018_license,  svytotal)
out_1_2017=svyby(~license1, by= ~gestfips, design = z2017_prime,  svytotal)
out_1_2018=svyby(~license1, by= ~gestfips, design = z2018_prime,  svytotal)
out_2_2017=svyby(~license2, by= ~gestfips, design = z2017_cert,  svytotal)
out_2_2018=svyby(~license2, by= ~gestfips, design = z2018_cert,  svytotal)
out_3_2017=svyby(~license3, by= ~gestfips, design = z2017_license,  svytotal)
out_3_2018=svyby(~license3, by= ~gestfips, design = z2018_license,  svytotal)
state=read.csv('/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/State_FIPS.csv')
names(pop_1_2017)
colnames(pop_1_2017)[colnames(pop_1_2017)=="one"]="population_prime"
pop_1_2017$se=NULL
names(pop_1_2018)
colnames(pop_1_2018)[colnames(pop_1_2018)=="one"]="population_prime"
pop_1_2018$se=NULL
pop_1	=	merge(pop_1_2017, pop_1_2018)
#license_1_f	=	merge(license_1, state)
pop_f <- within(pop_1, change_pop <- cert_18-cert_17)
pop_1_2017=svyby(~one, by= ~gestfips, design = z2017_prime,  svytotal)
pop_1_2018=svyby(~one, by= ~gestfips, design = z2018_prime,  svytotal)
out_1_2017_a=svyby(~pecert1, by= ~gestfips, design = z2017_prime,  svytotal)
out_1_2018_a=svyby(~pecert1, by= ~gestfips, design = z2018_prime,  svytotal)
out_2_2017_a=svyby(~pecert2, by= ~gestfips, design = z2017_cert,  svytotal)
out_2_2018_a=svyby(~pecert2, by= ~gestfips, design = z2018_cert,  svytotal)
out_3_2017_a=svyby(~pecert3, by= ~gestfips, design = z2017_license,  svytotal)
out_3_2018_a=svyby(~pecert3, by= ~gestfips, design = z2018_license,  svytotal)
out_1_2017=svyby(~license1, by= ~gestfips, design = z2017_prime,  svytotal)
out_1_2018=svyby(~license1, by= ~gestfips, design = z2018_prime,  svytotal)
out_2_2017=svyby(~license2, by= ~gestfips, design = z2017_cert,  svytotal)
out_2_2018=svyby(~license2, by= ~gestfips, design = z2018_cert,  svytotal)
out_3_2017=svyby(~license3, by= ~gestfips, design = z2017_license,  svytotal)
out_3_2018=svyby(~license3, by= ~gestfips, design = z2018_license,  svytotal)
state=read.csv('/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/State_FIPS.csv')
names(pop_1_2017)
colnames(pop_1_2017)[colnames(pop_1_2017)=="one"]="population_prime"
pop_1_2017$se=NULL
names(pop_1_2018)
colnames(pop_1_2018)[colnames(pop_1_2018)=="one"]="population_prime"
pop_1_2018$se=NULL
pop_1	=	merge(pop_1_2017, pop_1_2018)
#license_1_f	=	merge(license_1, state)
pop_f <- within(pop_1, change_pop <- cert_18-cert_17)
names(out_1_2017)
colnames(out_1_2017)[colnames(out_1_2017)=="license10"]="not_cert_17"
colnames(out_1_2017)[colnames(out_1_2017)=="license11"]="cert_17"
out_1_2017$se1=NULL
out_1_2017$se2=NULL
names(out_1_2018)
colnames(out_1_2018)[colnames(out_1_2018)=="license10"]="not_cert_18"
colnames(out_1_2018)[colnames(out_1_2018)=="license11"]="cert_18"
out_1_2018$se1=NULL
out_1_2018$se2=NULL
license_1	=	merge(out_1_2017, out_1_2018)
#license_1_f	=	merge(license_1, state)
license_1_f <- within(license_1, change_cert <- cert_18-cert_17)
# 2
names(out_2_2017)
colnames(out_2_2017)[colnames(out_2_2017)=="license20"]="not_lice_17"
colnames(out_2_2017)[colnames(out_2_2017)=="license21"]="lice_17"
out_2_2017$se1=NULL
out_2_2017$se2=NULL
names(out_2_2018)
colnames(out_2_2018)[colnames(out_2_2018)=="license20"]="not_lice_18"
colnames(out_2_2018)[colnames(out_2_2018)=="license21"]="lice_18"
out_2_2018$se1=NULL
out_2_2018$se2=NULL
license_2	=	merge(out_2_2017, out_2_2018)
#license_2_f	=	merge(license_2, state)
license_2_f <- within(license_2, change_lice <- lice_18-lice_17)
# 2
names(out_3_2017)
colnames(out_3_2017)[colnames(out_3_2017)=="license30"]="not_req_lice_17"
colnames(out_3_2017)[colnames(out_3_2017)=="license31"]="lice_req_17"
out_3_2017$se1=NULL
out_3_2017$se2=NULL
names(out_3_2018)
colnames(out_3_2018)[colnames(out_3_2018)=="license30"]="not_req_lice_18"
colnames(out_3_2018)[colnames(out_3_2018)=="license31"]="lice_req_18"
out_3_2018$se1=NULL
out_3_2018$se2=NULL
license_3	=	merge(out_3_2017, out_3_2018)
license_3_f <- within(license_3, change_req_lice <- lice_req_18-lice_req_17)
license_f=merge(license_1_f ,license_2_f, by="gestfips")
license_f=merge(pop_f ,license_f, by="gestfips")
license_final=merge(license_f ,license_3_f, by="gestfips")
license_final	=	merge(license_final, state, by="gestfips")
license_final <- within(license_final, change_cert_a <- change_cert*100)
license_final <- within(license_final, change_lice_a <- change_lice*100)
license_final <- within(license_final, change_req_lice_a <- change_req_lice*100)
write.csv(license_final, '/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/license_final.csv')
responses_15 <- pbmclapply(split_15, SafeGet, mc.preschedule=T)
save(responses_15, file = "responses_15.RData")
SafeGet = function (x)	{
tryCatch({
#	short_url_vector
html=GET(x)
parsed=htmlParse(html)
root=xmlRoot(parsed)
title = xpathSApply(root, "//h1[@class='page-h1'][1]", xmlValue)
return(title)
Sys.sleep(.01)},
error=function(e){cat("ERROR :", conditionMessage(e))}, '0')}
split_url_vector = split(url_vector, ceiling(seq_along(url_vector)/5000))
split_1=split_url_vector[[1]]
split_2=split_url_vector[[2]]
split_3=split_url_vector[[3]]
split_4=split_url_vector[[4]]
split_5=split_url_vector[[5]]
split_6=split_url_vector[[6]]
split_7=split_url_vector[[7]]
split_8=split_url_vector[[8]]
split_9=split_url_vector[[9]]
split_10=split_url_vector[[10]]
split_11=split_url_vector[[11]]
split_12=split_url_vector[[12]]
split_13=split_url_vector[[13]]
split_14=split_url_vector[[14]]
split_15=split_url_vector[[15]]
responses_15 <- pbmclapply(split_15, SafeGet, mc.preschedule=T)
save(responses_15, file = "responses_15.RData")
responses_14 <- pbmclapply(split_14, SafeGet, mc.preschedule=T)
save(responses_14, file = "responses_14.RData")
pop_1_2017=svyby(~one, by= ~gestfips, design = z2017_prime,  svytotal)
pop_1_2018=svyby(~one, by= ~gestfips, design = z2018_prime,  svytotal)
out_1_2017_a=svyby(~pecert1, by= ~gestfips, design = z2017_prime,  svytotal)
out_1_2018_a=svyby(~pecert1, by= ~gestfips, design = z2018_prime,  svytotal)
out_2_2017_a=svyby(~pecert2, by= ~gestfips, design = z2017_prime,  svytotal)
out_2_2018_a=svyby(~pecert2, by= ~gestfips, design = z2018_cert,  svytotal)
out_3_2017_a=svyby(~pecert3, by= ~gestfips, design = z2017_license,  svytotal)
out_3_2018_a=svyby(~pecert3, by= ~gestfips, design = z2018_license,  svytotal)
out_1_2017=svyby(~license1, by= ~gestfips, design = z2017_prime,  svytotal)
out_1_2018=svyby(~license1, by= ~gestfips, design = z2018_prime,  svytotal)
out_2_2017=svyby(~license2, by= ~gestfips, design = z2017_prime,  svytotal)
out_2_2018=svyby(~license2, by= ~gestfips, design = z2018_prime,  svytotal)
out_3_2017=svyby(~license3, by= ~gestfips, design = z2017_prime,  svytotal)
out_3_2018=svyby(~license3, by= ~gestfips, design = z2018_prime,  svytotal)
state=read.csv('/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/State_FIPS.csv')
View(license_1_f)
state=read.csv('/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/State_FIPS.csv')
names(pop_1_2017)
colnames(pop_1_2017)[colnames(pop_1_2017)=="one"]="population_prime"
pop_1_2017$se=NULL
names(pop_1_2018)
colnames(pop_1_2018)[colnames(pop_1_2018)=="one"]="population_prime"
pop_1_2018$se=NULL
pop_1	=	merge(pop_1_2017, pop_1_2018)
pop_f <- within(pop_1, change_pop <- cert_18-cert_17)
#1
names(out_1_2017)
colnames(out_1_2017)[colnames(out_1_2017)=="license10"]="not_cert_17"
colnames(out_1_2017)[colnames(out_1_2017)=="license11"]="cert_17"
out_1_2017$se1=NULL
out_1_2017$se2=NULL
names(out_1_2018)
colnames(out_1_2018)[colnames(out_1_2018)=="license10"]="not_cert_18"
colnames(out_1_2018)[colnames(out_1_2018)=="license11"]="cert_18"
out_1_2018$se1=NULL
out_1_2018$se2=NULL
license_1_f	=	merge(out_1_2017, out_1_2018)
#license_1_f	=	merge(license_1, state)
# 2
names(out_2_2017)
colnames(out_2_2017)[colnames(out_2_2017)=="license20"]="not_lice_17"
colnames(out_2_2017)[colnames(out_2_2017)=="license21"]="lice_17"
out_2_2017$se1=NULL
out_2_2017$se2=NULL
names(out_2_2018)
colnames(out_2_2018)[colnames(out_2_2018)=="license20"]="not_lice_18"
colnames(out_2_2018)[colnames(out_2_2018)=="license21"]="lice_18"
out_2_2018$se1=NULL
out_2_2018$se2=NULL
license_2_f	=	merge(out_2_2017, out_2_2018)
#license_2_f	=	merge(license_2, state)
# 2
names(out_3_2017)
colnames(out_3_2017)[colnames(out_3_2017)=="license30"]="not_req_lice_17"
colnames(out_3_2017)[colnames(out_3_2017)=="license31"]="lice_req_17"
out_3_2017$se1=NULL
out_3_2017$se2=NULL
names(out_3_2018)
colnames(out_3_2018)[colnames(out_3_2018)=="license30"]="not_req_lice_18"
colnames(out_3_2018)[colnames(out_3_2018)=="license31"]="lice_req_18"
out_3_2018$se1=NULL
out_3_2018$se2=NULL
license_3_f	=	merge(out_3_2017, out_3_2018)
## Calcs
license_f=merge(license_1_f ,license_2_f, by="gestfips")
license_f=merge(license_3_f ,license_f, by="gestfips")
license_final=merge(license_f ,pop_f , by="gestfips")
license_final	=	merge(license_final, state, by="gestfips")
names(pop_1_2017)
colnames(pop_1_2017)[colnames(pop_1_2017)=="one"]="population_prime"
pop_1_2017$se=NULL
names(pop_1_2018)
colnames(pop_1_2018)[colnames(pop_1_2018)=="one"]="population_prime"
pop_1_2018$se=NULL
pop_1	=	merge(pop_1_2017, pop_1_2018)
pop_f <- within(pop_1, change_pop <- cert_18-cert_17)
pop_1_2017=svyby(~one, by= ~gestfips, design = z2017_prime,  svytotal)
pop_1_2018=svyby(~one, by= ~gestfips, design = z2018_prime,  svytotal)
names(pop_1_2017)
colnames(pop_1_2017)[colnames(pop_1_2017)=="one"]="population_prime_17"
pop_1_2017$se=NULL
names(pop_1_2018)
colnames(pop_1_2018)[colnames(pop_1_2018)=="one"]="population_prime_18"
pop_1_2018$se=NULL
pop_1	=	merge(pop_1_2017, pop_1_2018)
pop_f <- within(pop_1, change_pop <- cert_18-cert_17)
pop_f <- within(pop_1, change_pop <- population_prime_18-population_prime_17)
out_3_2017=svyby(~license3, by= ~gestfips, design = z2017_prime,  svytotal)
out_3_2018=svyby(~license3, by= ~gestfips, design = z2018_prime,  svytotal)
state=read.csv('/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/State_FIPS.csv')
names(pop_1_2017)
colnames(pop_1_2017)[colnames(pop_1_2017)=="one"]="population_prime_17"
pop_1_2017$se=NULL
names(pop_1_2018)
colnames(pop_1_2018)[colnames(pop_1_2018)=="one"]="population_prime_18"
pop_1_2018$se=NULL
pop_1	=	merge(pop_1_2017, pop_1_2018)
pop_f <- within(pop_1, change_pop <- population_prime_18-population_prime_17)
#1
names(out_1_2017)
colnames(out_1_2017)[colnames(out_1_2017)=="license10"]="not_cert_17"
colnames(out_1_2017)[colnames(out_1_2017)=="license11"]="cert_17"
out_1_2017$se1=NULL
out_1_2017$se2=NULL
names(out_1_2018)
colnames(out_1_2018)[colnames(out_1_2018)=="license10"]="not_cert_18"
colnames(out_1_2018)[colnames(out_1_2018)=="license11"]="cert_18"
out_1_2018$se1=NULL
out_1_2018$se2=NULL
license_1_f	=	merge(out_1_2017, out_1_2018)
#license_1_f	=	merge(license_1, state)
# 2
names(out_2_2017)
colnames(out_2_2017)[colnames(out_2_2017)=="license20"]="not_lice_17"
colnames(out_2_2017)[colnames(out_2_2017)=="license21"]="lice_17"
out_2_2017$se1=NULL
out_2_2017$se2=NULL
names(out_2_2018)
colnames(out_2_2018)[colnames(out_2_2018)=="license20"]="not_lice_18"
colnames(out_2_2018)[colnames(out_2_2018)=="license21"]="lice_18"
out_2_2018$se1=NULL
out_2_2018$se2=NULL
license_2_f	=	merge(out_2_2017, out_2_2018)
#license_2_f	=	merge(license_2, state)
# 2
names(out_3_2017)
colnames(out_3_2017)[colnames(out_3_2017)=="license30"]="not_req_lice_17"
colnames(out_3_2017)[colnames(out_3_2017)=="license31"]="lice_req_17"
out_3_2017$se1=NULL
out_3_2017$se2=NULL
names(out_3_2018)
colnames(out_3_2018)[colnames(out_3_2018)=="license30"]="not_req_lice_18"
colnames(out_3_2018)[colnames(out_3_2018)=="license31"]="lice_req_18"
out_3_2018$se1=NULL
out_3_2018$se2=NULL
license_3_f	=	merge(out_3_2017, out_3_2018)
## Calcs
license_f=merge(license_1_f ,license_2_f, by="gestfips")
license_f=merge(license_3_f ,license_f, by="gestfips")
license_final=merge(license_f ,pop_f , by="gestfips")
license_final	=	merge(license_final, state, by="gestfips")
names(license_final)
names(license_final)
license_final <- within(license_final, perc_cert_17 <- cert_17/(not_cert_17+cert_17))
license_final <- within(license_final, perc_cert_18 <- cert_18/(not_cert_18+cert_18))
license_final <- within(license_final, perc_lice_17 <- lice_17/(not_lice_17+lice_17))
license_final <- within(license_final, perc_lice_18 <- lice_18/(not_lice_18+lice_18))
license_final <- within(license_final, perc_req_lice_17 <- lice_req_17/(not_lice_req_17+lice_req_17))
license_final <- within(license_final, perc_req_lice_18 <- lice_req_18/(not_lice_req_18+lice_req_18))
out_1_2017=svyby(~license1, by= ~gestfips, design = z2017_prime,  svytotal)
out_1_2018=svyby(~license1, by= ~gestfips, design = z2018_prime,  svytotal)
out_2_2017=svyby(~license2, by= ~gestfips, design = z2017_prime,  svytotal)
out_2_2018=svyby(~license2, by= ~gestfips, design = z2018_prime,  svytotal)
out_3_2017=svyby(~license3, by= ~gestfips, design = z2017_prime,  svytotal)
out_3_2018=svyby(~license3, by= ~gestfips, design = z2018_prime,  svytotal)
state=read.csv('/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/State_FIPS.csv')
names(pop_1_2017)
colnames(pop_1_2017)[colnames(pop_1_2017)=="one"]="population_prime_17"
pop_1_2017$se=NULL
names(pop_1_2018)
colnames(pop_1_2018)[colnames(pop_1_2018)=="one"]="population_prime_18"
pop_1_2018$se=NULL
pop_1	=	merge(pop_1_2017, pop_1_2018)
pop_f <- within(pop_1, change_pop <- population_prime_18-population_prime_17)
#1
names(out_1_2017)
colnames(out_1_2017)[colnames(out_1_2017)=="license10"]="not_cert_17"
colnames(out_1_2017)[colnames(out_1_2017)=="license11"]="cert_17"
out_1_2017$se1=NULL
out_1_2017$se2=NULL
names(out_1_2018)
colnames(out_1_2018)[colnames(out_1_2018)=="license10"]="not_cert_18"
colnames(out_1_2018)[colnames(out_1_2018)=="license11"]="cert_18"
out_1_2018$se1=NULL
out_1_2018$se2=NULL
license_1_f	=	merge(out_1_2017, out_1_2018)
#license_1_f	=	merge(license_1, state)
# 2
names(out_2_2017)
colnames(out_2_2017)[colnames(out_2_2017)=="license20"]="not_lice_17"
colnames(out_2_2017)[colnames(out_2_2017)=="license21"]="lice_17"
out_2_2017$se1=NULL
out_2_2017$se2=NULL
names(out_2_2018)
colnames(out_2_2018)[colnames(out_2_2018)=="license20"]="not_lice_18"
colnames(out_2_2018)[colnames(out_2_2018)=="license21"]="lice_18"
out_2_2018$se1=NULL
out_2_2018$se2=NULL
license_2_f	=	merge(out_2_2017, out_2_2018)
#license_2_f	=	merge(license_2, state)
# 2
names(out_3_2017)
colnames(out_3_2017)[colnames(out_3_2017)=="license30"]="not_lice_req_17"
colnames(out_3_2017)[colnames(out_3_2017)=="license31"]="lice_req_17"
out_3_2017$se1=NULL
out_3_2017$se2=NULL
names(out_3_2018)
colnames(out_3_2018)[colnames(out_3_2018)=="license30"]="not_lice_req_18"
colnames(out_3_2018)[colnames(out_3_2018)=="license31"]="lice_req_18"
out_3_2018$se1=NULL
out_3_2018$se2=NULL
license_3_f	=	merge(out_3_2017, out_3_2018)
## Calcs
license_f=merge(license_1_f ,license_2_f, by="gestfips")
license_f=merge(license_3_f ,license_f, by="gestfips")
license_final=merge(license_f ,pop_f , by="gestfips")
license_final	=	merge(license_final, state, by="gestfips")
## Calcs
names(license_final)
license_final <- within(license_final, perc_cert_17 <- cert_17/(not_cert_17+cert_17))
license_final <- within(license_final, perc_cert_18 <- cert_18/(not_cert_18+cert_18))
license_final <- within(license_final, perc_lice_17 <- lice_17/(not_lice_17+lice_17))
license_final <- within(license_final, perc_lice_18 <- lice_18/(not_lice_18+lice_18))
license_final <- within(license_final, perc_req_lice_17 <- lice_req_17/(not_lice_req_17+lice_req_17))
license_final <- within(license_final, perc_req_lice_18 <- lice_req_18/(not_lice_req_18+lice_req_18))
View(license_final)
license_final <- within(license_final, change_req_lice <- perc_req_lice_18-perc_req_lice_17)
license_final <- within(license_final, change_lice <- perc_lice_18-perc_lice_17)
license_final <- within(license_final, change_cert <- perc_cert_18-perc_cert_17)
license_final <- within(license_final, change_cert_perc <- change_cert*100)
license_final <- within(license_final, change_lice_perc <- change_lice*100)
license_final <- within(license_final, change_req_lice_perc <- change_req_lice*100)
write.csv(license_final, '/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/license_final.csv')
names(license_final)
license_final <- within(license_final, perc_cert_17 <- cert_17/(not_cert_17+cert_17))
license_final <- within(license_final, perc_cert_18 <- cert_18/(not_cert_18+cert_18))
license_final <- within(license_final, perc_lice_17 <- lice_17/(not_lice_17+lice_17))
license_final <- within(license_final, perc_lice_18 <- lice_18/(not_lice_18+lice_18))
license_final <- within(license_final, perc_req_lice_17 <- lice_req_17/(not_lice_req_17+lice_req_17))
license_final <- within(license_final, perc_req_lice_18 <- lice_req_18/(not_lice_req_18+lice_req_18))
license_final <- within(license_final, change_cert <- (perc_cert_18-perc_cert_17)*100)
license_final <- within(license_final, change_lice <- (perc_lice_18-perc_lice_17)*100)
license_final <- within(license_final, change_req_lice <- (perc_req_lice_18-perc_req_lice_17)*100)
license_final <- within(license_final, rate_cert <- perc_cert_18/perc_cert_17)
license_final <- within(license_final, rate_lice <- perc_lice_18/perc_lice_17)
license_final <- within(license_final, rate_req_lice <- perc_req_lice_18/perc_req_lice_17)
write.csv(license_final, '/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/license_final.csv')
names(license_final)
license_final <- within(license_final, perc_cert_17 <- cert_17/(not_cert_17+cert_17))
license_final <- within(license_final, perc_cert_18 <- cert_18/(not_cert_18+cert_18))
license_final <- within(license_final, perc_lice_17 <- lice_17/(not_lice_17+lice_17))
license_final <- within(license_final, perc_lice_18 <- lice_18/(not_lice_18+lice_18))
license_final <- within(license_final, perc_req_lice_17 <- lice_req_17/(not_lice_req_17+lice_req_17))
license_final <- within(license_final, perc_req_lice_18 <- lice_req_18/(not_lice_req_18+lice_req_18))
license_final <- within(license_final, change_cert <- (perc_cert_18-perc_cert_17)*100)
license_final <- within(license_final, change_lice <- (perc_lice_18-perc_lice_17)*100)
license_final <- within(license_final, change_req_lice <- (perc_req_lice_18-perc_req_lice_17)*100)
license_final <- within(license_final, rate_cert <- (perc_cert_18/perc_cert_17)-1)
license_final <- within(license_final, rate_lice <- (perc_lice_18/perc_lice_17)-1)
license_final <- within(license_final, rate_req_lice <- (perc_req_lice_18/perc_req_lice_17)-1)
write.csv(license_final, '/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/license_final.csv')
license_final <- within(license_final, perc_cert_17 <- cert_17/(not_cert_17+cert_17)*100)
license_final <- within(license_final, perc_cert_18 <- cert_18/(not_cert_18+cert_18)*100)
license_final <- within(license_final, perc_lice_17 <- lice_17/(not_lice_17+lice_17)*100)
license_final <- within(license_final, perc_lice_18 <- lice_18/(not_lice_18+lice_18)*100)
license_final <- within(license_final, perc_req_lice_17 <- lice_req_17/(not_lice_req_17+lice_req_17)*100)
license_final <- within(license_final, perc_req_lice_18 <- lice_req_18/(not_lice_req_18+lice_req_18)*100)
license_final <- within(license_final, change_cert <- (perc_cert_18-perc_cert_17))
license_final <- within(license_final, change_lice <- (perc_lice_18-perc_lice_17))
license_final <- within(license_final, change_req_lice <- (perc_req_lice_18-perc_req_lice_17))
license_final <- within(license_final, rate_cert <- (perc_cert_18/perc_cert_17)-1)
license_final <- within(license_final, rate_lice <- (perc_lice_18/perc_lice_17)-1)
license_final <- within(license_final, rate_req_lice <- (perc_req_lice_18/perc_req_lice_17)-1)
write.csv(license_final, '/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/license_final.csv')
## Calcs
names(license_final)
license_final <- within(license_final, perc_cert_17 <- cert_17/(not_cert_17+cert_17)*100)
license_final <- within(license_final, perc_cert_18 <- cert_18/(not_cert_18+cert_18)*100)
license_final <- within(license_final, perc_lice_17 <- lice_17/(not_lice_17+lice_17)*100)
license_final <- within(license_final, perc_lice_18 <- lice_18/(not_lice_18+lice_18)*100)
license_final <- within(license_final, perc_req_lice_17 <- lice_req_17/(not_lice_req_17+lice_req_17)*100)
license_final <- within(license_final, perc_req_lice_18 <- lice_req_18/(not_lice_req_18+lice_req_18)*100)
license_final <- within(license_final, perc_lice_req_job_18 <- lice_req_18/(lice_18)*100)
license_final <- within(license_final, change_cert <- (perc_cert_18-perc_cert_17))
license_final <- within(license_final, change_lice <- (perc_lice_18-perc_lice_17))
license_final <- within(license_final, change_req_lice <- (perc_req_lice_18-perc_req_lice_17))
license_final <- within(license_final, rate_cert <- (perc_cert_18/perc_cert_17)-1)
license_final <- within(license_final, rate_lice <- (perc_lice_18/perc_lice_17)-1)
license_final <- within(license_final, rate_req_lice <- (perc_req_lice_18/perc_req_lice_17)-1)
write.csv(license_final, '/Users/rorr/Desktop/Welfare_Policy/Data/R - Survey data/Current Population Survey (CPS)/license_final.csv')
